1. ### API Gateway Service

   1. 클라이언트를 대신해 요청하고 클라이언트에게 결과를 돌려줌
   2. 시스템의 내부 구조는 숨기고 외부의 요청에 대해서 적절한 형태로 가공해서 응답
   3. 클라이언트가 마이크로 서비스를 직접적으로 호출하는 것은 좋지 않다는 개념
   4. 기능
      - 인증 및 권한 부여
      - 서비스 검색 통합
      - 응답 캐싱
      - 정책, 회로 차단기 및 QoS 다시 시도
      - 속도 제한 / 부하 분산
      - 로깅, 추적, 상관 관계
      - 헤더, 쿼리 문자열 및 청구 변환
      - IP허용 목록에 추가

2. ### Netflix Ribbon

   1. ##### Spring Cloud에서의 MSA간 통신

      1. RestTemplate

      2. Feign Client

         ```java
         // 임의의 인터페이스를 만든다
         @FeignClient("stores")
         public interface StoreClient{
             // 직접적인 마이크로 서비스의 주소나 포트번호를 지정하는것이 아닌 마이크로서비스 이름으로 호출할 수 있다.
         	@RequestMapping(method = RequestMethos.GET, value = "/stores")
         	List<Store> getStores();
         }
         ```

   2. ##### Ribbon

      - 기존에는 마이크로서비스 호출에 IP와 포트번호를 지정했지만, Ribbon이라는 서비스로 마이크로서비스의 이름만으로 호출할 수 있게 됐다.

      - Client side Load Balancer 
      - 마이크로 서비스의 서비스 이름으로 호출
      - Health Check
      - Spring Ribbon은 Spring Boot 2.4버전에서 Matainance 상태이다. (지원을 보류하는 상태)

3. ### Netflix Zuul

   1. 구성
      - First Service
      - Second Service
      - Netflix Zuul : Geteway 역할

   2. Spring Netflix Zuul은 Spring Boot 2.4버전에서 Matainance 상태이다. (지원을 보류하는 상태)

   3. 구현 (각각 다른 애플리케이션)

      ![image-20210807143549408](D:\code\spring\baron\spring-demo-2\src\main\resources\docs\Microservice\netflix_zuul.png)

      호출되는 서비스에 따라 포트번호는 통일되지만, 호출되는 애플리케이션은 다르다.

      ![image-20210807143737920](D:\code\spring\baron\spring-demo-2\src\main\resources\docs\Microservice\netflix_zuul_service.png)

      Pre : 사전필터 / Post : 사후필터

      추상클래스 ZuulFilter를 상속

      ![image-20210807143906629](D:\code\spring\baron\spring-demo-2\src\main\resources\docs\Microservice\netflix_zuul_filter.png)

4. ### Spring Cloud Gateway

   1. 비동기 방식 지원

   2. Dependencies

      - DevTools
      - Eureka Discovery Client
      - Gateway (Spring cloud Routing)

   3. 설정정보

      ![image-20210807171715825](D:\code\spring\baron\spring-demo-2\src\main\resources\docs\Microservice\cloud_gateway)

      - predicates : 조건

   4. 적용

      